# I/O复用 之 select
&nbsp;&nbsp;该函数允许进程指示内核等待多个事件中的任何一个发生，并只在有一个或多个事件发生或经历一段指定的时间后才唤醒他。如，可以调用select,告知内核仅在下列情况发生时才返回:
- 集合{1,4,5}中的任何描述符准备好读
- 集合{2,7}中的任何描述符准备好写
- 集合{1,4}中的任何描述符有异常条件待处理
- 已经历了10.2秒

&nbsp;&nbsp;调用select告知内核对那些描述符(就读、写或异常条件)感兴趣以及等待多长时间(**任何描述符都可以使用select来测试**)。

## 函数原型
```c
       #include <sys/time.h>
       #include <sys/types.h>
       #include <unistd.h>
       
       /**
        * 
        * @param nfds 指定待测试的描述符个数, 值为待测试的最大描述符+1: 描述符0,1,2...nfds-1均将被测试.
        * @param readfds 需要让内核测试的读描述符
        * @param writefds 需要让内核测试的写描述符
        * @param exceptfds 需要让内核测试的异常描述符
        * @param timeout 告知内核等待所指定描述符中的任意一个就绪可花多长时间
        * 
        * @return 若有就绪描述符则为其数目,若超时则为0,若出错则为-1.
        * 
        */ 
       int select(int nfds, fd_set *readfds, fd_set *writefds,
                  fd_set *exceptfds, struct timeval *timeout);

        
        /**
         *  
         * 对于timeout 参数，有三种可能:
         *   1. 永远等待下去： 传NULL (仅在有一个描述符准备好I/O时才返回)
         *   2. 等待一段固定时间: 指定 timeval 的秒和毫秒数 
         *   3. 根本不等待: timeval 值均为0
         */

        /**
         *  如何指定测试的描述符呢? 通过 fd_set
         * 
         * fd_set rset;
         * FD_ZERO(&rset);  // initialize the set: all bits off 
         * FD_SET(1,&rset); // turn on bit for fd 1
         * FD_SET(4,&rset); // turn on bit for fd 4
         * FD_SET(5,&rset); // turn on bit for fd 5
         */ 

```

### select 的最大描述符数



### 测试代码
&nbsp;&nbsp;测试用例: 使用select测试多个文件,并将文件的变更打印到终端。 代码:[code_unix_select.c](./014.Unix网络/000.IO复用/code_unix_select.c)