# Java函数堆栈空间分配
> 先阅读:[揭秘Java虚拟机#第二章](../../006.BOOKs/Unlocking-The-Java-Virtual-Machine/002.Unlocking-The-Java-Virtual-Machine-2.pdf)
>>　先弄清楚例程的概念、创建、存储

JVM为了能够调用 Java 函数，需要在运行期知道一个 Java 函数的入参大小，然后动态计算出所需要的堆栈空间 。 这就是JVM能够调用 Java 函数的`核心机制` 

JVM在执行Java函数调用时，仍然沿用了物理机器所使用的堆栈这一算法数据结构。因此，JVM仍然需要为Java被调用函数分配堆栈内存，保存被调用函数的空间大小，并动态为其分配堆栈空间。

`寄生`<sup>拓展别人的堆栈，存储自己所需要的数据</sup>: 由于物理机器不能识别Java程序，也不能直接执行Java程序，因此，JVM必然要通过自己作为一道桥梁<sup>JVM选择了 CallStub(StubRoutines::call_stub()) </sup>连接到Java程序，并让Java被调用的函数的堆栈能够“寄生”在JVM的某个函数的堆栈空间中，否则物理机器不会自动为Java方法分配堆栈。

