# 栈顶缓存
栈顶缓存的数据通过寄存器来暂存，并非内存。

## 栈顶缓存产生的背景
+ CPU 从寄存器中读取数据的速度比从内存中读取快好几个数量级(如百倍)
+ CPU 中寄存器的数量有限制
+ CPU 的运算执行规则,以加法举例: 不能直接对两个内存中的数据直接求和：
    - 方式1).将一个数据读取金寄存器，而另一个保留在内存中; 
    - 方式2).将两个数据全部读取到寄存器中
      + 因寄存器数量有限，因此无法将操作数全部加载到寄存器中，只能将其中一个数加载到内存中<sub>存在效率上的牺牲</sub>

JVM 栈顶缓存是对`CPU`这种在时间<sub>内存和寄存器访问速度的差异</sub>和空间<sub>寄存器数量有限</sub>上不能两全的遗憾而进行的改进措施。

由于CPU无法兼顾时间和空间，而JVM追求的则是性能，因此只能舍弃空间： 模板解释器在执行操作数栈操作时，按照常规思路，肯定会将数据直接压入栈顶，栈顶就是内存存储单元，但是JVM并没有走寻常路，为了追求性能，JVM在执行操作数栈相关操作时，会优先将数据传送到寄存器，而非真正的栈顶。在后续的流程中，CPU执行运算时，便无须将数据再从栈顶传送到寄存器（因为数据本来就缓存在寄存器中，这便节省了一次内存读写，从而提升了JVM虚拟机运算指令的执行效率） —— 栈顶缓存


