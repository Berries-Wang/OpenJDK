# JVM引用
&nbsp;&nbsp;引用，即如果reference类型的数据中存储的数值代表的是另外一块内存的起始地址，就称该reference数据代表某块内存、某个对象的引用。

## JVM引用类型
&nbsp;&nbsp;下面讲述了JVM中的引用类型以及在Java中的存在形式以及回收策略等

&nbsp;&nbsp;列举顺序: 从上往下，引用强度越弱。
### 强引用
&nbsp;&nbsp;指在代码中普遍存在的引用赋值，即类似于"Object obj = new Object();"这种引用关系。无论任何情况下，只要强引用关系还存在，垃圾收集器就不会回收掉被引用的对象。

### 软引用(Soft Reference)
&nbsp;&nbsp;软引用用来描述一些还有用，但是非必须的对象。只被软引用关联的对象，在系统将要发生内存溢出异常前，会把这些对象列进回收范围之中进行第二次回收。如果这次还没有足够的内存，那么会抛出OOM异常。

#### 软引用在Java中的体现
- [005.OpenJDK/001.openJdk8-b120/jdk-jdk8-b120/jdk/src/share/classes/java/lang/ref/SoftReference.java](../../005.OpenJDK/001.openJdk8-b120/jdk-jdk8-b120/jdk/src/share/classes/java/lang/ref/SoftReference.java)
#### 软引用的回收策略
- 通过GC代码进行分析: 如[004.OpenJDK(JVM)学习/009.GC/006.VM_Operation.md](../../004.OpenJDK(JVM)学习/009.GC/006.VM_Operation.md),即通过 VM_GenCollectForAllocation 开始分析.


### 弱引用
&nbsp;&nbsp;弱引用也是用来描述那些非必须的对象，但是他的强度比软引用更若一些，被弱引用关联的对象只能生存到下一次GC发生之前。即当垃圾收集器开始工作，不论当前内存是否足够，都会回收掉只被若引用关联的对象。

#### 弱引用在Java中的体现
- [005.OpenJDK/001.openJdk8-b120/jdk-jdk8-b120/jdk/src/share/classes/java/lang/ref/WeakReference.java](../../005.OpenJDK/001.openJdk8-b120/jdk-jdk8-b120/jdk/src/share/classes/java/lang/ref/WeakReference.java)

### 虚引用
&nbsp;&nbsp;虚引用也被称为 幽灵引用 或 幻影引用，他是最弱的一种引用关系。一个对象是否有虚引用的存在，完全不会对其生存时间构成影响。也无法通过一个虚引用来获取一个对象实例。
> 为一个对象设置虚引用关联的唯一目的只是为了能够在这个对象被收集器回收时收到一个系统通知。

#### 虚引用在Java中的体现
- [005.OpenJDK/001.openJdk8-b120/jdk-jdk8-b120/jdk/src/share/classes/java/lang/ref/FinalReference.java](../../005.OpenJDK/001.openJdk8-b120/jdk-jdk8-b120/jdk/src/share/classes/java/lang/ref/FinalReference.java)



---
## 参考资料
1. [https://docs.oracle.com/javase/10/gctuning/other-considerations.htm#JSGCT-GUID-A7B0991C-661F-47BE-AEDB-74C6BDBDE181](https://docs.oracle.com/javase/10/gctuning/other-considerations.htm#JSGCT-GUID-A7B0991C-661F-47BE-AEDB-74C6BDBDE181)
2. OpenJDK8