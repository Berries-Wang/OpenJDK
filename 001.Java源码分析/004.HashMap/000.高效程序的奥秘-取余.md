# 高效程序的奥秘-取余
### 与(&)运算
&nbsp;&nbsp;在移位运算中可知，计算机中的数据都是0和1的序列，当把某一个数字左移一位，该数字会扩大为原来的2倍；而将其右移一位，该数字就会缩小为原来的1/2，即相当于对该数字做了一次被2整除的运算。如:
```txt
   11 --(二进制)--> 1011
   右移一位 -> 0101 ， 即10进制的5
```
&nbsp;&nbsp;现在考虑11除以8的余数，很明显，余数为3。求余数时相当于除以2的3次幂，也就是将1011右移3位，该过程会把1011的低3位011给移走，事实上，**这个被移走的011就是11除以8的余数**。

### 取余
&nbsp;&nbsp;接上，那么如何将这个011保存下来呢? 和1做与运算会保留原来的数字，所以可以使用 1011 & 0111 来计算,那么这个 0111 怎么来呢? 两种方法:
1. 2^n - 1 , 如 8 = 2^3 => 2^n - 1 = 2^3 - 1 = 0111
2. 取反 ， ~8 = ~（1000） = 0111

&nbsp;&nbsp;综上，位运算取余**仅**适用于除数是2的n次幂的情况：*对2的n次幂取余，就预示着将数字向右移动n位，这被右移的n位，就是余数!!!*

### 应用
&nbsp;&nbsp;设 X 对 Y取余,Y = 2^n,那么余数 = X & (Y - 1) 或  余数 = X & (~Y) 

&nbsp;&nbsp;X & (Y - 1) = X % Y，但是&更高效.

## 参考
1. [算法心得：高效算法的奥秘]()
